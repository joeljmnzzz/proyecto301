<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil - Proyecto 301</title>

  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/profile.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <script src="../js/supabase-client.js" defer></script>
  <script src="../js/load-navbar.js" defer></script>
  <script src="../js/profile.js" defer></script>
  <script src="../js/spinner.js" defer></script>
</head>
<body class="profile-page">

  <div id="navbar-placeholder"></div>
  
  <div class="ball profile-ball"></div>

  <main class="profile-main">
    
    <!-- Header del perfil -->
    <section class="profile-header">
      <div class="profile-hero">
        <div class="profile-avatar-section">
          <div class="avatar-container">
            <img src="" alt="Avatar" class="profile-avatar" id="profile-avatar">
            <button class="avatar-edit-btn" id="avatar-edit-btn">
              <i class="fas fa-camera"></i>
            </button>
          </div>
          <div class="profile-basic-info">
            <h1 class="profile-name" id="profile-name">Cargando...</h1>
            <p class="profile-profession" id="profile-profession"></p>
            <div class="profile-location">
              <i class="fas fa-map-marker-alt"></i>
              <span id="profile-location"></span>
            </div>
            <div class="profile-stats">
              <div class="stat-item">
                <span class="stat-value" id="projects-count">0</span>
                <span class="stat-label">Proyectos</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="connections-count">0</span>
                <span class="stat-label">Seguidores</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="following-count">0</span>
                <span class="stat-label">Siguiendo</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="profile-actions" id="profile-actions">
          <!-- Los botones se cargarán dinámicamente según si es mi perfil o no -->
        </div>
      </div>
    </section>

    <!-- Grid principal del perfil -->
    <div class="profile-grid">
      
      <!-- Columna izquierda: Información personal -->
      <div class="profile-column">
        
        <!-- Sección Acerca de mí -->
        <section class="profile-card about-section">
          <div class="card-header">
            <h2><i class="fas fa-user"></i> Acerca de mí</h2>
            <button class="btn-edit" data-section="about" id="edit-about-btn">
              <i class="fas fa-edit"></i>
            </button>
          </div>
          <div class="about-content">
            <p class="profile-bio" id="profile-bio"></p>
            <div class="personal-info">
              <div class="info-item">
                <i class="fas fa-calendar"></i>
                <span id="profile-joined"></span>
              </div>
              <div class="info-item">
                <i class="fas fa-link"></i>
                <a href="#" id="profile-website" class="profile-link"></a>
              </div>
            </div>
          </div>
        </section>

        <!-- Habilidades y Tecnologías -->
        <section class="profile-card skills-section">
          <div class="card-header">
            <h2><i class="fas fa-code"></i> Habilidades & Tecnologías</h2>
            <button class="btn-edit" data-section="skills" id="edit-skills-btn">
              <i class="fas fa-edit"></i>
            </button>
          </div>
          <div class="skills-container" id="skills-container">
            <div class="skills-grid" id="skills-list"></div>
          </div>
        </section>

        <!-- Experiencia -->
        <section class="profile-card experience-section">
          <div class="card-header">
            <h2><i class="fas fa-briefcase"></i> Experiencia</h2>
            <button class="btn-edit" data-section="experience" id="edit-experience-btn">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <div class="experience-list" id="experience-list"></div>
        </section>

      </div>

      <!-- Columna derecha: Contenido social -->
      <div class="profile-column">
        
        <!-- Acciones sociales -->
        <section class="profile-card social-actions-section">
          <div class="social-stats">
            <div class="social-stat">
              <i class="fas fa-heart"></i>
              <span class="stat-number" id="likes-count">0</span>
              <span class="stat-label">Likes</span>
            </div>
            <div class="social-stat">
              <i class="fas fa-comment"></i>
              <span class="stat-number" id="comments-count">0</span>
              <span class="stat-label">Comentarios</span>
            </div>
            <div class="social-stat">
              <i class="fas fa-share"></i>
              <span class="stat-number" id="shares-count">0</span>
              <span class="stat-label">Compartidos</span>
            </div>
          </div>
          <div class="action-buttons" id="social-action-buttons">
            <!-- Botones de seguir/mensaje/etc se cargarán dinámicamente -->
          </div>
        </section>

        <!-- Proyectos recientes -->
        <section class="profile-card projects-section">
          <div class="card-header">
            <h2><i class="fas fa-rocket"></i> Proyectos Recientes</h2>
            <a href="../dashboard.html" class="btn-view-all">
              Ver Todos <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="projects-mini-grid" id="profile-projects"></div>
        </section>

        <!-- Actividad reciente -->
        <section class="profile-card activity-section">
          <div class="card-header">
            <h2><i class="fas fa-rss"></i> Actividad Reciente</h2>
          </div>
          <div class="activity-list" id="recent-activity"></div>
        </section>

        <!-- Conexiones -->
        <section class="profile-card connections-section">
          <div class="card-header">
            <h2><i class="fas fa-users"></i> Conexiones</h2>
            <a href="#" class="btn-view-all" id="view-connections-btn">
              Ver Todos
            </a>
          </div>
          <div class="connections-grid" id="recent-connections"></div>
        </section>

      </div>
    </div>

  </main>

  <footer>
    <p>© 2025 Proyecto 301 — Comunidad de desarrollo creativo</p>
  </footer>

  <!-- Modales -->
  <div id="modal-container"></div>
</body>
</html>